<!doctype html>
{% extends 'default.html' %}
{% load static %}
<html dir="rtl" lang="fa">

{% block content %}

      <main
        class="flex-grow bg-secondary-light pb-14 pt-36 dark:bg-primary-dark xs:pt-36"
      >
        <div class="container relative">
          <div class="mb-6 hidden md:block">
            <nav
              aria-label="Breadcrumb"
              class="w-fit rounded-lg bg-primary-light px-4 py-4 shadow-base dark:bg-secondary-dark"
            >
              <ol
                class="flex flex-wrap items-center justify-center gap-x-2 gap-y-4"
              >
                <li class="flex items-center gap-x-2">
                  <a
                    href="{% url 'main:index' %}"
                    class="text-sm text-quaternary-600 hover:text-quaternary-700 dark:text-quaternary-300 hover:dark:text-primary-light"
                  >
                    روتی کالا
                  </a>
                  <span class="text-quaternary-600 dark:text-quaternary-300">
                    <svg class="h-5 w-5">
                      <use xlink:href="#chevron-left"></use>
                    </svg>
                  </span>
                </li>
                <li class="flex items-center gap-x-2">
                  <a
                    href="{% url 'main:blog' %}"
                    class="text-sm text-quaternary-600 hover:text-quaternary-700 dark:text-quaternary-300 hover:dark:text-primary-light"
                  >
                    وبلاگ
                  </a>
                  <span class="text-quaternary-600 dark:text-quaternary-300">
                    <svg class="h-5 w-5">
                      <use xlink:href="#chevron-left"></use>
                    </svg>
                  </span>
                </li>

                <li>
                  <p
                    class="text-sm text-quaternary-600 hover:text-quaternary-700 dark:text-quaternary-300 hover:dark:text-primary-light"
                  >
                    {{ blog.title}}
                  </p>
                </li>
              </ol>
            </nav>
          </div>
          <div class="mb-4 flex flex-wrap items-center gap-2 md:hidden">
            <div
              class="flex items-center gap-x-1 text-sm font-light text-tertiary-500 dark:text-tertiary-400 sm:text-base md:text-base"
            >
              <a href="{% url 'main:index' %}"> روتی کالا </a>
              <svg class="h-5 w-5">
                <use xlink:href="#chevron-left"></use>
              </svg>
            </div>
            <div
              class="flex items-center gap-x-1 text-sm font-light text-tertiary-500 dark:text-tertiary-400 sm:text-base md:text-base"
            >
              <a href="{% url 'main:blog_detail' blog.id %}"> وبلاگ </a>
              <svg class="h-5 w-5">
                <use xlink:href="#chevron-left"></use>
              </svg>
            </div>
            <div
              class="line-clamp-1 text-sm font-light text-tertiary-500 dark:text-tertiary-400 sm:text-base md:text-base"
            >
                {{ blog.title}}
            </div>
          </div>
          <div class="grid grid-cols-12 grid-rows-[60px_min(500px,_1fr)] gap-4">
            <div class="col-span-12 space-y-4 md:col-span-8 lg:col-span-9">
              <div
                class="rounded-lg bg-primary-light p-3 shadow-base dark:bg-secondary-dark md:p-5"
              >
                <h1
                  class="mb-8 font-medium text-quaternary-700 dark:text-primary-light md:text-xl"
                >
                    {{ blog.title}}
                </h1>

                <div
                  class="mb-8 flex flex-col items-center justify-between gap-4 xs:flex-row"
                >
                  <div
                    class="flex items-center gap-x-2 text-sm text-quaternary-600 dark:text-quaternary-300"
                  >
                    <div class="flex items-center gap-x-2">
                      <svg class="h-5 w-5">
                        <use xlink:href="#user" />
                      </svg>
                      <p class="font-medium">تایماز اکبری</p>
                    </div>
                    <div
                      class="h-3 w-px rounded-full bg-senary-200 dark:bg-primary-light/5"
                    ></div>
                    <div>{{ blog.jdate }}</div>
                  </div>
                  <div>
                    <button
                      id="dropdownMenuCopySocialShareLink"
                      data-dropdown-toggle="copy-social-share-link"
                      data-tooltip-target="share-on-social"
                      type="button"
                      class="btn-primary-nobg"
                    >
                      <svg class="h-5 w-5">
                        <use xlink:href="#social-share" />
                      </svg>
                      اشتراک گذاری
                    </button>
                    <!-- Dropdown menu -->
                    <div
                      class="z-10 !ml-5 hidden w-50 overflow-hidden rounded-lg border border-secondary-light bg-primary-light shadow-base dark:border-primary-light/5 dark:bg-secondary-dark"
                      id="copy-social-share-link"
                    >
                      <ul class="space-y-2 p-2">
                        <li>
                          <button
                            type="button"
                            data-link="https://www.google.com"
                            onclick="copyToClipboardSocialShareDesktop(this)"
                            class="flex w-full items-center justify-between rounded-lg px-4 py-3 text-sky-500 hover:bg-sky-500/10 dark:text-sky-400 dark:hover:bg-sky-400/10"
                          >
                            <div class="flex items-center gap-x-2">
                              <svg class="h-6 w-6">
                                <use xlink:href="#copy"></use>
                              </svg>
                              <span id="copyToClipboardSocialShareText">
                                کپی کردن لینک
                              </span>
                            </div>
                          </button>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="mb-8">
                  <img
                    src="{{blog.image.url}}"
                    alt="blog"
                    class="w-full rounded-xl"
                  />
                </div>
                <div
                  class="leading-loose text-quaternary-600 dark:text-quaternary-300"
                >
                  <p class="mb-6">
                      {{blog.content|safe}}
                  </p>

                </div>
              </div>
            </div>
            <!-- Desktop Filter Section -->
            <div class="col-span-4 row-span-2 hidden md:block lg:col-span-3">
              <div class="sticky top-32 mb-4 overflow-hidden">
                <!-- related Blogs -->
                <div
                  class="mb-8 rounded-lg bg-primary-light px-2 py-3 shadow-base dark:bg-secondary-dark xl:px-4"
                >
                  <p
                    class="mb-4 text-center text-sm font-medium text-quaternary-700 dark:text-primary-light xl:text-base"
                  >
                    مطالب مرتبط
                  </p>
                  <ul class="space-y-8">
                      {% for blog in related_blog %}
                    <li>
                      <a href="{% url 'main:blog_detail' blog.id %}">
                        <div class="flex gap-x-2 xl:gap-x-4">
                          <div class="min-w-fit">
                            <img
                              src="{{blog.image.url}}"
                              alt="blog"
                              class="w-25 rounded-xl xl:w-32"
                            />
                          </div>
                          <div class="flex flex-col gap-y-2">
                            <p
                              class="line-clamp-2 text-sm text-quaternary-600 dark:text-quaternary-300 xl:text-base"
                            >
                                {{ blog.title}}
                            </p>
                            <p
                              class="text-xs text-quaternary-500 dark:text-quaternary-400 xl:text-sm"
                            >
                                {{ blog.jdate}}
                            </p>
                          </div>
                        </div>
                      </a>
                    </li>
                      {% endfor %}

                  </ul>
                </div>
                <!-- hot Blogs -->
                <div
                  class="mb-8 rounded-lg bg-primary-light px-2 py-3 shadow-base dark:bg-secondary-dark xl:px-4"
                >
                  <p
                    class="mb-4 text-center text-sm font-medium text-quaternary-700 dark:text-primary-light xl:text-base"
                  >
                    مطالب محبوب
                  </p>
                  <ul class="space-y-8">
                      {% for blog in hot_blog %}
                    <li>
                      <a href="{% url 'main:blog_detail' blog.id%}">
                        <div class="flex gap-x-2 xl:gap-x-4">
                          <div class="min-w-fit">
                            <img
                              src="{{blog.image.url}}"
                              alt="blog"
                              class="w-25 rounded-xl xl:w-32"
                            />
                          </div>
                          <div class="flex flex-col gap-y-2">
                            <p
                              class="line-clamp-2 text-sm text-quaternary-600 dark:text-quaternary-300 xl:text-base"
                            >
                                {{blog.title}}
                            </p>
                            <p
                              class="text-xs text-quaternary-500 dark:text-quaternary-400 xl:text-sm"
                            >
                              {{ blog.jdate }}
                            </p>
                          </div>
                        </div>
                      </a>
                    </li>
{% endfor %}
                  </ul>
                </div>

              </div>
            </div>
          </div>
        </div>
      </main>
{% endblock content %}
    </div>
    <script>
      const copyToClipboardSocialShareDesktop = (button) => {
        const linkToCopy = button.getAttribute("data-link");
        if (linkToCopy) {
          navigator.clipboard
            .writeText(linkToCopy)
            .then(function () {
              const copyToClipboardSocialShareText = document.getElementById(
                "copyToClipboardSocialShareText",
              );
              copyToClipboardSocialShareText.innerText = "کپی شد !";

              // Revert the text after 5 seconds
              setTimeout(function () {
                copyToClipboardSocialShareText.innerText = "کپی کردن لینک";
              }, 5000);
            })
            .catch(function (err) {
              console.error("مشکلی در عملیات پیش آمد", err);
            });
        }
      };
      const copyToClipboardSocialShareMobile = (button) => {
        const linkToCopy = button.getAttribute("data-link");
        console.log(linkToCopy);
        if (linkToCopy) {
          navigator.clipboard
            .writeText(linkToCopy)
            .then(function () {
              const copyToClipboardSocialShareNotifyMobile =
                document.getElementById(
                  "notify-copied-social-share-link-mobile",
                );
              copyToClipboardSocialShareNotifyMobile.classList.remove("hidden");

              // Revert the text after 5 seconds
              setTimeout(function () {
                copyToClipboardSocialShareNotifyMobile.classList.add("hidden");
              }, 5000);
            })
            .catch(function (err) {
              console.error("مشکلی در عملیات پیش آمد", err);
            });
        }
      };
    </script>
</html>